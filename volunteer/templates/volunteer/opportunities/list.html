{% extends 'base.html' %}
{% load static %}

{% block title %}Volunteer Opportunities - Make an Impact - EcoHub{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary-emerald: #10b981;
        --emerald-50: #ecfdf5;
        --emerald-100: #d1fae5;
        --emerald-200: #a7f3d0;
        --emerald-300: #6ee7b7;
        --emerald-400: #34d399;
        --emerald-500: #10b981;
        --emerald-600: #059669;
        --emerald-700: #047857;
        --emerald-800: #065f46;
        --emerald-900: #064e3b;
        --teal-500: #14b8a6;
        --teal-600: #0d9488;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --gray-900: #111827;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        --radius-sm: 0.125rem;
        --radius: 0.25rem;
        --radius-md: 0.375rem;
        --radius-lg: 0.5rem;
        --radius-xl: 0.75rem;
        --radius-2xl: 1rem;
        --radius-3xl: 1.5rem;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        line-height: 1.5;
        color: var(--gray-800);
        background-color: var(--gray-50);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .container {
        width: 100%;
        max-width: 1280px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    @media (min-width: 640px) {
        .container {
            padding: 0 1.5rem;
        }
    }

    @media (min-width: 1024px) {
        .container {
            padding: 0 2rem;
        }
    }

    .min-h-screen {
        min-height: 100vh;
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
        font-weight: 700;
        line-height: 1.2;
        color: var(--gray-900);
    }

    h1 {
        font-size: 2.25rem;
        line-height: 2.5rem;
    }

    @media (min-width: 768px) {
        h1 {
            font-size: 3rem;
            line-height: 1;
        }
    }

    h2 {
        font-size: 1.875rem;
        line-height: 2.25rem;
    }

    @media (min-width: 768px) {
        h2 {
            font-size: 2.25rem;
            line-height: 2.5rem;
        }
    }

    h3 {
        font-size: 1.5rem;
        line-height: 2rem;
    }

    h4 {
        font-size: 1.25rem;
        line-height: 1.75rem;
    }

    p {
        margin-bottom: 1rem;
    }

    /* Buttons */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.625rem 1.25rem;
        font-size: 0.875rem;
        font-weight: 500;
        line-height: 1.25rem;
        border-radius: var(--radius-lg);
        border: 1px solid transparent;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        outline: none;
        position: relative;
        overflow: hidden;
    }

    .btn:focus {
        outline: 2px solid transparent;
        outline-offset: 2px;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.5);
    }

    .btn-sm {
        padding: 0.5rem 1rem;
        font-size: 0.75rem;
    }

    .btn-primary {
        background-color: var(--primary-emerald);
        color: white;
        border-color: var(--primary-emerald);
    }

    .btn-primary:hover {
        background-color: var(--emerald-600);
        border-color: var(--emerald-600);
        transform: translateY(-1px);
        box-shadow: var(--shadow-lg);
    }

    .btn-primary:active {
        transform: translateY(0);
    }

    .btn-outline {
        background-color: transparent;
        color: var(--primary-emerald);
        border-color: var(--emerald-300);
    }

    .btn-outline:hover {
        background-color: var(--emerald-50);
        border-color: var(--primary-emerald);
        transform: translateY(-1px);
    }

    .btn-outline:active {
        transform: translateY(0);
    }

    /* Cards */
    .opportunity-card {
        background: white;
        border-radius: var(--radius-2xl);
        border: 1px solid var(--gray-200);
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        box-shadow: var(--shadow);
    }

    .opportunity-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--emerald-400), var(--teal-500));
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
    }

    .opportunity-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-2xl);
        border-color: var(--emerald-200);
    }

    .opportunity-card:hover::before {
        transform: scaleX(1);
    }

    /* Grid System */
    .grid {
        display: grid;
        gap: 1.5rem;
    }

    .grid-cols-1 {
        grid-template-columns: repeat(1, minmax(0, 1fr));
    }

    @media (min-width: 768px) {
        .grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        
        .grid-cols-4 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }
    }

    @media (min-width: 1024px) {
        .grid-cols-3 {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }
        
        .grid-cols-7 {
            grid-template-columns: repeat(7, minmax(0, 1fr));
        }
    }

    /* Flex Utilities */
    .flex {
        display: flex;
    }

    .flex-col {
        flex-direction: column;
    }

    @media (min-width: 768px) {
        .md\:flex-row {
            flex-direction: row;
        }
    }

    @media (min-width: 1024px) {
        .lg\:flex-row {
            flex-direction: row;
        }
    }

    .items-center {
        align-items: center;
    }

    .justify-center {
        justify-content: center;
    }

    .justify-between {
        justify-content: space-between;
    }

    .space-y-2 > * + * {
        margin-top: 0.5rem;
    }

    .space-y-3 > * + * {
        margin-top: 0.75rem;
    }

    .space-y-4 > * + * {
        margin-top: 1rem;
    }

    .space-y-6 > * + * {
        margin-top: 1.5rem;
    }

    .space-x-3 > * + * {
        margin-left: 0.75rem;
    }

    .space-x-4 > * + * {
        margin-left: 1rem;
    }

    /* Spacing */
    .p-2 {
        padding: 0.5rem;
    }

    .p-3 {
        padding: 0.75rem;
    }

    .p-4 {
        padding: 1rem;
    }

    .p-6 {
        padding: 1.5rem;
    }

    .p-8 {
        padding: 2rem;
    }

    .p-12 {
        padding: 3rem;
    }

    .px-3 {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
    }

    .px-4 {
        padding-left: 1rem;
        padding-right: 1rem;
    }

    .px-6 {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }

    .py-1 {
        padding-top: 0.25rem;
        padding-bottom: 0.25rem;
    }

    .py-2 {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
    }

    .py-3 {
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
    }

    .py-4 {
        padding-top: 1rem;
        padding-bottom: 1rem;
    }

    .py-6 {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem;
    }

    .py-8 {
        padding-top: 2rem;
        padding-bottom: 2rem;
    }

    .py-12 {
        padding-top: 3rem;
        padding-bottom: 3rem;
    }

    .py-16 {
        padding-top: 4rem;
        padding-bottom: 4rem;
    }

    .mb-1 {
        margin-bottom: 0.25rem;
    }

    .mb-2 {
        margin-bottom: 0.5rem;
    }

    .mb-3 {
        margin-bottom: 0.75rem;
    }

    .mb-4 {
        margin-bottom: 1rem;
    }

    .mb-6 {
        margin-bottom: 1.5rem;
    }

    .mb-8 {
        margin-bottom: 2rem;
    }

    .mb-10 {
        margin-bottom: 2.5rem;
    }

    .mb-12 {
        margin-bottom: 3rem;
    }

    .mt-1 {
        margin-top: 0.25rem;
    }

    .mt-2 {
        margin-top: 0.5rem;
    }

    .mt-4 {
        margin-top: 1rem;
    }

    .mr-1 {
        margin-right: 0.25rem;
    }

    .mr-2 {
        margin-right: 0.5rem;
    }

    .mr-3 {
        margin-right: 0.75rem;
    }

    .mr-4 {
        margin-right: 1rem;
    }

    .ml-2 {
        margin-left: 0.5rem;
    }

    .mx-auto {
        margin-left: auto;
        margin-right: auto;
    }

    /* Backgrounds */
    .bg-white {
        background-color: white;
    }

    .bg-gray-50 {
        background-color: var(--gray-50);
    }

    .bg-emerald-50 {
        background-color: var(--emerald-50);
    }

    .bg-emerald-100 {
        background-color: var(--emerald-100);
    }

    .bg-emerald-500 {
        background-color: var(--primary-emerald);
    }

    .bg-gradient-to-r {
        background-image: linear-gradient(to right, var(--tw-gradient-stops));
    }

    .from-emerald-500 {
        --tw-gradient-from: var(--primary-emerald);
        --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(16, 185, 129, 0));
    }

    .to-teal-600 {
        --tw-gradient-to: var(--teal-600);
    }

    /* Text Colors */
    .text-white {
        color: white;
    }

    .text-gray-600 {
        color: var(--gray-600);
    }

    .text-gray-700 {
        color: var(--gray-700);
    }

    .text-gray-800 {
        color: var(--gray-800);
    }

    .text-gray-900 {
        color: var(--gray-900);
    }

    .text-emerald-100 {
        color: var(--emerald-100);
    }

    .text-emerald-200 {
        color: var(--emerald-200);
    }

    .text-emerald-500 {
        color: var(--primary-emerald);
    }

    .text-emerald-600 {
        color: var(--emerald-600);
    }

    .text-emerald-700 {
        color: var(--emerald-700);
    }

    .text-emerald-800 {
        color: var(--emerald-800);
    }

    .text-center {
        text-align: center;
    }

    /* Borders */
    .border {
        border-width: 1px;
    }

    .border-2 {
        border-width: 2px;
    }

    .border-gray-200 {
        border-color: var(--gray-200);
    }

    .border-gray-300 {
        border-color: var(--gray-300);
    }

    .border-transparent {
        border-color: transparent;
    }

    .rounded-lg {
        border-radius: var(--radius-lg);
    }

    .rounded-xl {
        border-radius: var(--radius-xl);
    }

    .rounded-2xl {
        border-radius: var(--radius-2xl);
    }

    .rounded-full {
        border-radius: 9999px;
    }

    /* Shadows */
    .shadow-lg {
        box-shadow: var(--shadow-lg);
    }

    .shadow-xl {
        box-shadow: var(--shadow-xl);
    }

    /* Width & Height */
    .w-full {
        width: 100%;
    }

    .w-12 {
        width: 3rem;
    }

    .w-16 {
        width: 4rem;
    }

    .w-24 {
        width: 6rem;
    }

    .w-32 {
        width: 8rem;
    }

    .h-12 {
        height: 3rem;
    }

    .h-16 {
        height: 4rem;
    }

    .h-24 {
        height: 6rem;
    }

    .h-32 {
        height: 8rem;
    }

    /* Specific Components */
    .urgency-badge {
        font-size: 0.75rem;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.8;
        }
    }

    .impact-meter {
        height: 8px;
        background: var(--gray-200);
        border-radius: 4px;
        overflow: hidden;
        position: relative;
    }

    .impact-meter-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--emerald-400), var(--teal-500));
        border-radius: 4px;
        transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        overflow: hidden;
    }

    .impact-meter-fill::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
            90deg,
            transparent,
            rgba(255, 255, 255, 0.4),
            transparent
        );
        animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(100%);
        }
    }

    .location-pin {
        width: 32px;
        height: 32px;
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .skill-badge {
        font-size: 0.75rem;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        transition: all 0.2s ease;
    }

    .skill-badge:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow);
    }

    .volunteer-count {
        font-variant-numeric: tabular-nums;
        font-feature-settings: "tnum";
    }

    .calendar-day {
        width: 36px;
        height: 36px;
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-700);
        background: var(--gray-50);
    }

    .calendar-day:hover:not(.disabled) {
        background: var(--emerald-100);
        color: var(--emerald-700);
        transform: scale(1.1);
    }

    .calendar-day.selected {
        background-color: var(--primary-emerald);
        color: white;
        box-shadow: var(--shadow);
    }

    .calendar-day.disabled {
        color: var(--gray-400);
        cursor: not-allowed;
        background: var(--gray-100);
    }

    .map-container {
        height: 300px;
        background: linear-gradient(135deg, var(--emerald-100) 0%, var(--emerald-200) 100%);
        border-radius: var(--radius-2xl);
        position: relative;
        overflow: hidden;
    }

    .map-container::before {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.4) 0%, transparent 50%);
    }

    /* Line clamp utility */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Responsive utilities */
    .hidden {
        display: none;
    }

    @media (min-width: 640px) {
        .sm\:flex-row {
            flex-direction: row;
        }
        
        .sm\:block {
            display: block;
        }
    }

    @media (min-width: 768px) {
        .md\:grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        
        .md\:grid-cols-4 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }
        
        .md\:text-left {
            text-align: left;
        }
        
        .md\:space-y-0 > * + * {
            margin-top: 0;
        }
    }

    @media (min-width: 1024px) {
        .lg\:w-1\/4 {
            width: 25%;
        }
        
        .lg\:w-3\/4 {
            width: 75%;
        }
        
        .lg\:flex-row {
            flex-direction: row;
        }
    }

    /* Form Elements */
    select, input[type="checkbox"] {
        accent-color: var(--primary-emerald);
    }

    select {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.5rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }

    select:focus {
        outline: 2px solid transparent;
        outline-offset: 2px;
        border-color: var(--primary-emerald);
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    /* Badges */
    .badge {
        display: inline-flex;
        align-items: center;
        padding: 0.25rem 0.75rem;
        font-size: 0.75rem;
        font-weight: 500;
        border-radius: 9999px;
    }

    .badge-emerald {
        background-color: var(--emerald-100);
        color: var(--emerald-800);
    }

    .badge-blue {
        background-color: #dbeafe;
        color: #1e40af;
    }

    .badge-amber {
        background-color: #fef3c7;
        color: #92400e;
    }

    /* Loading animation */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    /* Glass effect */
    .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--gray-100);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--gray-400);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--gray-500);
    }

    /* Focus styles for accessibility */
    .focus-ring:focus {
        outline: 2px solid transparent;
        outline-offset: 2px;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.5);
    }

    /* Print styles */
    @media print {
        .no-print {
            display: none;
        }
        
        .opportunity-card {
            break-inside: avoid;
            box-shadow: none;
            border: 1px solid var(--gray-300);
        }
    }

    /* High contrast mode support */
    @media (prefers-contrast: high) {
        .btn-primary {
            border: 2px solid currentColor;
        }
        
        .opportunity-card {
            border: 2px solid var(--gray-700);
        }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
        :root {
            --gray-50: #111827;
            --gray-100: #1f2937;
            --gray-200: #374151;
            --gray-300: #4b5563;
            --gray-400: #6b7280;
            --gray-500: #9ca3af;
            --gray-600: #d1d5db;
            --gray-700: #e5e7eb;
            --gray-800: #f3f4f6;
            --gray-900: #f9fafb;
        }
        
        .opportunity-card {
            background: var(--gray-100);
            border-color: var(--gray-200);
        }
        
        .impact-meter {
            background: var(--gray-200);
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Hero Section -->
    <div class="bg-gradient-to-r from-emerald-500 to-teal-600 text-white">
        <div class="container px-4 py-16">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-6">Volunteer Opportunities</h1>
                <p class="text-xl text-emerald-100 mb-10">
                    Join thousands of volunteers making a tangible impact on environmental conservation, 
                    community education, and sustainability initiatives worldwide.
                </p>
                
                <!-- Impact Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
                    <div class="text-center p-4 bg-white/10 backdrop-blur-sm rounded-xl">
                        <div class="text-3xl font-bold mb-2">{{ total_opportunities|default:"500+" }}</div>
                        <div class="text-emerald-200">Opportunities</div>
                    </div>
                    <div class="text-center p-4 bg-white/10 backdrop-blur-sm rounded-xl">
                        <div class="text-3xl font-bold mb-2">{{ volunteers_needed|default:"2,000+" }}</div>
                        <div class="text-emerald-200">Volunteers Needed</div>
                    </div>
                    <div class="text-center p-4 bg-white/10 backdrop-blur-sm rounded-xl">
                        <div class="text-3xl font-bold mb-2">{{ hours_logged|default:"50K+" }}</div>
                        <div class="text-emerald-200">Hours Contributed</div>
                    </div>
                    <div class="text-center p-4 bg-white/10 backdrop-blur-sm rounded-xl">
                        <div class="text-3xl font-bold mb-2">96%</div>
                        <div class="text-emerald-200">Satisfaction Rate</div>
                    </div>
                </div>
                
                <!-- CTA Buttons -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="#opportunities" class="btn bg-white text-emerald-700 hover:bg-gray-100">
                        <i class="fas fa-search mr-2"></i>
                        Find Opportunities
                    </a>
                    <a href="#" class="btn bg-transparent border-2 border-white hover:bg-white/10" onclick="alert('Time logs feature coming soon!')"></a>
                        <i class="fas fa-clock mr-2"></i>
                        Log Hours
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container px-4 py-12">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar -->
            <div class="lg:w-1/4 space-y-6">
                <!-- Filter Panel -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="font-bold text-gray-800 mb-4">Find Your Perfect Opportunity</h3>
                    <form class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                            <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                                <option value="">Any Location</option>
                                <option value="remote">Remote/Virtual</option>
                                <option value="local">Local Opportunities</option>
                                <option value="international">International</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Commitment Level</label>
                            <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                                <option value="">Any Commitment</option>
                                <option value="one_time">One-time Event</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                                <option value="flexible">Flexible</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Activity Type</label>
                            <div class="space-y-2">
                                {% for activity in activity_types %}
                                <label class="flex items-center">
                                    <input type="checkbox" class="h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-600">{{ activity.name }}</span>
                                </label>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Required Skills</label>
                            <div class="space-y-2">
                                {% for skill in skills %}
                                <label class="flex items-center">
                                    <input type="checkbox" class="h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded">
                                    <span class="ml-2 text-sm text-gray-600">{{ skill.name }}</span>
                                </label>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Impact Area</label>
                            <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                                <option value="">All Areas</option>
                                <option value="conservation">Conservation</option>
                                <option value="education">Education</option>
                                <option value="community">Community Development</option>
                                <option value="research">Research</option>
                                <option value="advocacy">Advocacy</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="w-full btn btn-primary">
                            <i class="fas fa-filter mr-2"></i>
                            Apply Filters
                        </button>
                    </form>
                </div>
                
                <!-- Your Impact -->
                <div class="bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl p-6 text-white">
                    <div class="text-center mb-4">
                        <i class="fas fa-chart-line text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold mb-1">Your Impact</h3>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span>Hours This Month</span>
                            <span class="font-bold">24</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Total Hours</span>
                            <span class="font-bold">156</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Projects Completed</span>
                            <span class="font-bold">8</span>
                        </div>
                    </div>
                    <a href="#" class="mt-4 block text-center text-sm text-emerald-100 hover:text-white" onclick="alert('Log hours feature coming soon!')"></a>
                        Log More Hours →
                    </a>
                </div>
                
                <!-- Quick Apply -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="font-bold text-gray-800 mb-4">Quick Apply</h3>
                    <p class="text-gray-600 text-sm mb-4">Save your volunteer profile to apply faster</p>
                    <a href="#" class="w-full btn btn-outline">
                        <i class="fas fa-user-circle mr-2"></i>
                        Complete Profile
                    </a>
                </div>
                
                <!-- Calendar -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h3 class="font-bold text-gray-800 mb-4">Upcoming Events</h3>
                    <div class="grid grid-cols-7 gap-1 mb-4">
                        {% for day in "SMTWTFS" %}
                        <div class="text-center text-xs text-gray-500 py-1">{{ day }}</div>
                        {% endfor %}
                        
                        {% for day in calendar_days %}
                        <div class="calendar-day {{ day.classes }}">
                            {{ day.day }}
                        </div>
                        {% endfor %}
                    </div>
                    <div class="space-y-2">
                        {% for event in upcoming_events %}
                        <div class="text-sm">
                            <div class="font-medium text-gray-800">{{ event.title }}</div>
                            <div class="text-gray-500">{{ event.date }} • {{ event.time }}</div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:w-3/4">
                <!-- Header -->
                <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Available Opportunities</h2>
                            <p class="text-gray-600">Make a difference today</p>
                        </div>
                        
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <select class="appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
                                    <option>Sort by: Most Urgent</option>
                                    <option>Sort by: Newest</option>
                                    <option>Sort by: Most Impact</option>
                                    <option>Sort by: Nearby</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            
                            <button class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                <i class="fas fa-map-marker-alt text-emerald-500"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Active Filters -->
                    <div class="flex flex-wrap gap-2 mt-4">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-emerald-100 text-emerald-800">
                            Remote
                            <button class="ml-2 text-emerald-600 hover:text-emerald-800">
                                <i class="fas fa-times text-xs"></i>
                            </button>
                        </span>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                            Conservation
                            <button class="ml-2 text-blue-600 hover:text-blue-800">
                                <i class="fas fa-times text-xs"></i>
                            </button>
                        </span>
                        <button class="text-sm text-emerald-600 hover:text-emerald-700">
                            Clear all filters
                        </button>
                    </div>
                </div>

                <!-- Map View -->
                <div class="map-container rounded-2xl mb-6 overflow-hidden relative">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-map-marked-alt text-4xl text-emerald-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-gray-700 mb-2">Interactive Map</h3>
                            <p class="text-gray-600 mb-4">View volunteer opportunities near you</p>
                            <button class="btn btn-primary">
                                <i class="fas fa-expand mr-2"></i>
                                Open Map
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Opportunities Grid -->
                <div id="opportunities" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    {% for opportunity in opportunities %}
                    <div class="opportunity-card fade-in">
                        <!-- Urgency Badge -->
                        {% if opportunity.urgency == 'high' %}
                        <div class="bg-red-500 text-white px-4 py-2">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-exclamation-triangle mr-2"></i>
                                    <span class="font-medium">Urgent: Volunteers Needed</span>
                                </div>
                                <span class="text-sm">Apply by {{ opportunity.deadline|date:"M d" }}</span>
                            </div>
                        </div>
                        {% endif %}
                        
                        <div class="p-6">
                            <!-- Header -->
                            <div class="flex items-start justify-between mb-4">
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800 mb-2">{{ opportunity.title }}</h3>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <div class="location-pin bg-emerald-100 text-emerald-600 mr-3">
                                            <i class="fas fa-map-marker-alt"></i>
                                        </div>
                                        <div>
                                            <div class="font-medium">{{ opportunity.location }}</div>
                                            <div>{{ opportunity.get_type_display }}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Urgency Indicator -->
                                {% if opportunity.urgency != 'high' %}
                                <span class="badge {% if opportunity.urgency == 'medium' %}badge-amber{% else %}badge-emerald{% endif %}">
                                    {{ opportunity.get_urgency_display }}
                                </span>
                                {% endif %}
                            </div>
                            
                            <!-- Description -->
                            <p class="text-gray-600 mb-4 line-clamp-2">{{ opportunity.description|truncatewords:30 }}</p>
                            
                            <!-- Impact Meter - FIXED LINE -->
                            <div class="mb-4">
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>Impact Potential</span>
                                    <span>{{ opportunity.impact_score }}/10</span>
                                </div>
                                <div class="impact-meter">
                                    {% with width=opportunity.impact_score|default:0 %}
                                    <div class="impact-meter-fill" 
                                         style="width: {% widthratio width 1 10 %}%"></div>
                                    {% endwith %}
                                </div>
                            </div>
                            
                            <!-- Skills Required -->
                            <div class="mb-4">
                                <h4 class="text-sm font-medium text-gray-700 mb-2">Skills Needed</h4>
                                <div class="flex flex-wrap gap-2">
                                    {% for skill in opportunity.skills.all|slice:":3" %}
                                    <span class="skill-badge px-3 py-1 bg-blue-50 text-blue-700 rounded-full">
                                        {{ skill.name }}
                                    </span>
                                    {% endfor %}
                                    {% if opportunity.skills.count > 3 %}
                                    <span class="skill-badge px-3 py-1 bg-gray-100 text-gray-600 rounded-full">
                                        +{{ opportunity.skills.count|add:"-3" }}
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <!-- Details -->
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <div class="text-lg font-bold text-gray-800">{{ opportunity.duration }}</div>
                                    <div class="text-xs text-gray-500">Duration</div>
                                </div>
                                <div class="text-center p-3 bg-gray-50 rounded-lg">
                                    <div class="text-lg font-bold text-gray-800 volunteer-count">{{ opportunity.volunteers_needed }}</div>
                                    <div class="text-xs text-gray-500">Volunteers Needed</div>
                                </div>
                            </div>
                            
                            <!-- Actions -->
                            <div class="flex space-x-3">
                                <a href="{% url 'volunteer:opportunities:detail' opportunity.id %}" 
                                   class="flex-1 btn btn-outline btn-sm">
                                    <i class="fas fa-info-circle mr-2"></i>
                                    Details
                                </a>
                                <a href="{% url 'volunteer:apply' opportunity.id %}" 
                                   class="flex-1 btn btn-primary btn-sm">
                                    <i class="fas fa-handshake mr-2"></i>
                                    Apply Now
                                </a>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <!-- No Opportunities -->
                    <div class="col-span-2 bg-white rounded-2xl shadow-lg p-12 text-center">
                        <div class="w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-hands-helping text-3xl text-gray-400"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">No Opportunities Found</h3>
                        <p class="text-gray-600 mb-8 max-w-md mx-auto">
                            Try adjusting your filters or check back soon for new opportunities.
                        </p>
                        <button class="btn btn-primary">
                            <i class="fas fa-redo mr-2"></i>
                            Reset Filters
                        </button>
                    </div>
                    {% endfor %}
                </div>

                <!-- Impact Categories -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-6">Impact Categories</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="bg-white rounded-xl p-4 text-center border border-gray-200 hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 mx-auto mb-3 bg-emerald-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-tree text-emerald-600 text-xl"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1">Conservation</h4>
                            <p class="text-sm text-gray-600">Protect natural habitats</p>
                            <div class="text-xs text-emerald-600 mt-2">42 opportunities</div>
                        </div>
                        
                        <div class="bg-white rounded-xl p-4 text-center border border-gray-200 hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 mx-auto mb-3 bg-blue-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-graduation-cap text-blue-600 text-xl"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1">Education</h4>
                            <p class="text-sm text-gray-600">Teach sustainability</p>
                            <div class="text-xs text-blue-600 mt-2">28 opportunities</div>
                        </div>
                        
                        <div class="bg-white rounded-xl p-4 text-center border border-gray-200 hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 mx-auto mb-3 bg-purple-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-flask text-purple-600 text-xl"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1">Research</h4>
                            <p class="text-sm text-gray-600">Support environmental studies</p>
                            <div class="text-xs text-purple-600 mt-2">19 opportunities</div>
                        </div>
                        
                        <div class="bg-white rounded-xl p-4 text-center border border-gray-200 hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 mx-auto mb-3 bg-orange-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-users text-orange-600 text-xl"></i>
                            </div>
                            <h4 class="font-bold text-gray-800 mb-1">Community</h4>
                            <p class="text-sm text-gray-600">Engage local communities</p>
                            <div class="text-xs text-orange-600 mt-2">35 opportunities</div>
                        </div>
                    </div>
                </div>

                <!-- Volunteer Stories -->
                <div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-2xl p-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">Volunteer Stories</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        {% for story in volunteer_stories %}
                        <div class="bg-white rounded-xl p-6 hover:shadow-lg transition-shadow">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 rounded-full overflow-hidden mr-4 ring-2 ring-emerald-100">
                                    {% if story.avatar %}
                                    <img src="{{ story.avatar.url }}" 
                                         alt="{{ story.name }}" 
                                         class="w-full h-full object-cover">
                                    {% else %}
                                    <div class="w-full h-full bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center">
                                        <i class="fas fa-user text-white"></i>
                                    </div>
                                    {% endif %}
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-800">{{ story.name }}</h4>
                                    <p class="text-sm text-gray-600">{{ story.role }}</p>
                                    <div class="flex items-center text-xs text-gray-500 mt-1">
                                        <i class="fas fa-clock mr-1"></i>
                                        <span>{{ story.hours }} hours contributed</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-gray-600 text-sm mb-4 italic">"{{ story.testimonial|truncatewords:30 }}"</p>
                            <div class="flex items-center text-sm text-emerald-600">
                                <i class="fas fa-project-diagram mr-2"></i>
                                <span>{{ story.project }}</span>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recognition Program -->
    <div class="bg-gradient-to-r from-emerald-500 to-teal-600 py-12">
        <div class="container px-4">
            <div class="text-center text-white mb-8">
                <h2 class="text-3xl font-bold mb-4">Volunteer Recognition Program</h2>
                <p class="text-emerald-100 max-w-2xl mx-auto">
                    Earn badges, certificates, and rewards for your environmental contributions
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 text-center text-white hover:bg-white/15 transition-colors">
                    <div class="w-16 h-16 mx-auto mb-4 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-medal text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Achievement Badges</h3>
                    <p class="text-emerald-100 text-sm">Earn badges for milestones and special contributions</p>
                </div>
                
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 text-center text-white hover:bg-white/15 transition-colors">
                    <div class="w-16 h-16 mx-auto mb-4 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-certificate text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Certificates</h3>
                    <p class="text-emerald-100 text-sm">Receive official certificates for your volunteer work</p>
                </div>
                
                <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 text-center text-white hover:bg-white/15 transition-colors">
                    <div class="w-16 h-16 mx-auto mb-4 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-trophy text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">Annual Awards</h3>
                    <p class="text-emerald-100 text-sm">Compete for annual volunteer of the year awards</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Volunteer opportunity interactions
    document.addEventListener('DOMContentLoaded', function() {
        // Calendar day selection
        const calendarDays = document.querySelectorAll('.calendar-day:not(.disabled)');
        calendarDays.forEach(day => {
            day.addEventListener('click', function() {
                // Remove selection from all days
                calendarDays.forEach(d => d.classList.remove('selected'));
                // Add selection to clicked day
                this.classList.add('selected');
                
                // In a real app, this would filter opportunities by date
                console.log('Selected date:', this.textContent);
            });
        });
        
        // Impact meter animation
        const impactMeters = document.querySelectorAll('.impact-meter-fill');
        impactMeters.forEach(meter => {
            const width = meter.style.width;
            meter.style.width = '0';
            setTimeout(() => {
                meter.style.width = width;
            }, 300);
        });
        
        // Urgency badge animation
        const urgencyBadges = document.querySelectorAll('.badge-amber');
        urgencyBadges.forEach(badge => {
            badge.style.animation = 'pulse 3s ease-in-out infinite';
        });
        
        // Quick apply button
        const quickApplyButtons = document.querySelectorAll('.btn-primary');
        quickApplyButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                if (this.textContent.includes('Apply Now')) {
                    e.preventDefault();
                    // In a real app, this would open the application form
                    const opportunityTitle = this.closest('.opportunity-card').querySelector('h3').textContent;
                    console.log('Applying to:', opportunityTitle);
                    
                    // Show loading state
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Applying...';
                    this.disabled = true;
                    
                    // Simulate API call
                    setTimeout(() => {
                        alert(`Successfully applied to: ${opportunityTitle}`);
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }, 1500);
                }
            });
        });
        
        // Filter chip removal
        document.querySelectorAll('.inline-flex button').forEach(button => {
            button.addEventListener('click', function() {
                this.parentElement.style.display = 'none';
            });
        });
        
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                if (this.getAttribute('href') !== '#') {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });
        
        // Initialize tooltips
        const tooltipElements = document.querySelectorAll('[title]');
        tooltipElements.forEach(el => {
            el.addEventListener('mouseenter', function() {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                tooltip.textContent = this.getAttribute('title');
                document.body.appendChild(tooltip);
                
                const rect = this.getBoundingClientRect();
                tooltip.style.position = 'fixed';
                tooltip.style.top = (rect.top - tooltip.offsetHeight - 5) + 'px';
                tooltip.style.left = (rect.left + rect.width / 2 - tooltip.offsetWidth / 2) + 'px';
                tooltip.style.background = 'rgba(0,0,0,0.8)';
                tooltip.style.color = 'white';
                tooltip.style.padding = '4px 8px';
                tooltip.style.borderRadius = '4px';
                tooltip.style.fontSize = '12px';
                tooltip.style.zIndex = '9999';
                
                this._tooltip = tooltip;
            });
            
            el.addEventListener('mouseleave', function() {
                if (this._tooltip) {
                    document.body.removeChild(this._tooltip);
                    delete this._tooltip;
                }
            });
        });
    });
    
    // Handle window resize
    let resizeTimer;
    window.addEventListener('resize', function() {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(function() {
            // Recalculate anything that depends on window size
            console.log('Window resized to:', window.innerWidth, 'x', window.innerHeight);
        }, 250);
    });
</script>
{% endblock %}